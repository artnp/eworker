<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Primary Meta Tags -->
    <title>บริการรับงานคุณภาพ แก้ไขรูปภาพ เอกสาร และดิจิทัล | LINE @artap5321</title>
    <meta name="title" content="บริการรับงานคุณภาพ แก้ไขรูปภาพ เอกสาร และดิจิทัล | LINE @artap5321">
    <meta name="description"
        content="บริการรับจ้างงานคุณภาพโดยผู้เชี่ยวชาญ แก้ไขรูปภาพพิธีการ หาชื่อฟอนต์ ปรึกษาปัญหาคอมพิวเตอร์ ทำไฟล์เอกสาร ถอดซับไตเติ้ล และระบบดิจิทัล ราคาเริ่มต้นเพียง 50 บาท ติดต่อ LINE @artap5321">
    <meta name="keywords"
        content="รับจ้างทำงาน, แก้ไขรูปภาพ, ตัดต่อรูป, หาฟอนต์, สกัด URL Youtube, ถอดซับไตเติ้ล, ทำเอกสาร, E-Worker, Dosfixvirus, Edit us, รับงานออนไลน์">
    <meta name="author" content="E-Worker">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://artnp.github.io/eworker/">

    <!-- Favicons & App Icons -->
    <link rel="icon" type="image/png" sizes="16x16" href="https://cdn-icons-png.flaticon.com/128/13540/13540872.png">
    <link rel="icon" type="image/png" sizes="32x32" href="https://cdn-icons-png.flaticon.com/128/13540/13540872.png">
    <link rel="apple-touch-icon" sizes="180x180" href="https://cdn-icons-png.flaticon.com/128/13540/13540872.png">
    <meta name="theme-color" content="#000000">
    <meta name="msapplication-TileColor" content="#000000">

    <!-- Performance & Resources -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://cdn-icons-png.flaticon.com">
    <link rel="dns-prefetch" href="https://www.youtube.com">
    <link rel="dns-prefetch" href="https://player.vimeo.com">

    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://artnp.github.io/eworker/">
    <meta property="og:title" content="บริการรับงานคุณภาพ แก้ไขรูปภาพ เอกสาร และดิจิทัล | LINE @artap5321">
    <meta property="og:description"
        content="บริการรับจ้างงานคุณภาพโดยผู้เชี่ยวชาญ แก้ไขรูปภาพพิธีการ หาชื่อฟอนต์ ปรึกษาปัญหาคอมพิวเตอร์ และอื่นๆ ราคาเป็นกันเอง">
    <meta property="og:image" content="https://cdn-icons-png.flaticon.com/128/13540/13540872.png">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://artnp.github.io/eworker/">
    <meta property="twitter:title" content="บริการรับงานคุณภาพ แก้ไขรูปภาพ เอกสาร และดิจิทัล | LINE @artap5321">
    <meta property="twitter:description"
        content="บริการรับจ้างงานคุณภาพโดยผู้เชี่ยวชาญ แก้ไขรูปภาพพิธีการ หาชื่อฟอนต์ ปรึกษาปัญหาคอมพิวเตอร์ และอื่นๆ">
    <meta property="twitter:image" content="https://cdn-icons-png.flaticon.com/128/13540/13540872.png">

    <!-- Structured Data (JSON-LD) - Service Schema -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Service",
      "name": "E-Worker Digital Services",
      "description": "Professional digital services including image editing, document processing, and technical consulting.",
      "provider": {
        "@type": "LocalBusiness",
        "name": "E-Worker",
        "image": "https://cdn-icons-png.flaticon.com/128/13540/13540872.png",
        "url": "https://artnp.github.io/eworker/"
      },
      "areaServed": "TH",
      "hasOfferCatalog": {
        "@type": "OfferCatalog",
        "name": "Digital Services",
        "itemListElement": [
          {
            "@type": "Offer",
            "itemOffered": {
              "@type": "Service",
              "name": "แก้ไขรูปภาพในงานพิธีการ"
            }
          },
          {
            "@type": "Offer",
            "itemOffered": {
              "@type": "Service",
              "name": "ถอดซับไตเติ้ล"
            }
          }
        ]
      }
    }
    </script>

    <!-- Organization Schema -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Organization",
      "name": "E-Worker Digital Services",
      "url": "https://artnp.github.io/eworker/",
      "logo": "https://cdn-icons-png.flaticon.com/128/13540/13540872.png",
      "contactPoint": {
        "@type": "ContactPoint",
        "contactType": "customer service",
        "availableLanguage": ["Thai", "English"]
      },
      "sameAs": [
        "https://line.me/ti/p/~@artap5321"
      ]
    }
    </script>

    <!-- BreadcrumbList Schema -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement": [{
        "@type": "ListItem",
        "position": 1,
        "name": "หน้าแรก",
        "item": "https://artnp.github.io/eworker/"
      }]
    }
    </script>

    <!-- FAQ Schema -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "FAQPage",
      "mainEntity": [
        {
          "@type": "Question",
          "name": "บริการรับจ้างทำอะไรบ้าง",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "รับจ้างแก้ไขรูปภาพในงานพิธีการ หาชื่อฟอนต์จากภาพเอกสาร สกัด URL Youtube IDs จำนวนมาก ถอดซับไตเติ้ลจากวิดีโอ ทำไฟล์เอกสารส่งมอบงาน และบริการอื่นๆ ราคาเริ่มต้น 50 บาท"
          }
        },
        {
          "@type": "Question",
          "name": "ติดต่อจ้างงานได้ที่ไหน",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "สามารถติดต่อจ้างงานได้ผ่าน LINE @artap5321"
          }
        },
        {
          "@type": "Question",
          "name": "ราคาเริ่มต้นเท่าไหร่",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "ราคาเริ่มต้น 50 บาท ขึ้นอยู่กับประเภทและความซับซ้อนของงาน มีบางงานที่ให้บริการฟรี"
          }
        }
      ]
    }
    </script>

    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">
    <style>
        html,
        body {
            scroll-behavior: smooth;
        }

        * {
            box-sizing: border-box;
        }

        body {
            font-family: "Sarabun", sans-serif;
            line-height: 2.0;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            background: #000000;
            /* ดำสนิท */
            color: #FFFFFF;
            /* ขาว */
            scroll-behavior: smooth;
        }

        h1 {
            text-align: center;
            font-weight: 800;
            margin-bottom: 40px;
            font-size: 36px;
            letter-spacing: 1px;
            color: #f1da0a;
        }

        h2 {
            text-align: center;
            color: hwb(0 63% 37%);
            /* แดงส้ม/เร่งเร้า */
            margin-bottom: 30px;
            font-weight: 700;
            text-transform: uppercase;
        }

        h3 {
            color: #f1da0a;
            margin: 0;
        }

        p.intro {
            text-align: center;
            font-weight: 600;
            margin-bottom: 30px;
            background: #111111;
            padding: 20px;
            border-radius: 15px;
            font-size: 22px;
            border: 3px solid #FFD700;
            /* กรอบทอง */
            line-height: 1.6;
            color: #FFFFFF;
        }

        p.intro strong {
            color: #FF0000;
            /* แดงเร่งเร้า */
            font-size: 1.2em;
        }

        .paragraph {
            margin: 30px 0;
            padding: 25px;
            border-radius: 16px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
            transition: all 1.2s cubic-bezier(0.22, 1, 0.36, 1);
            opacity: 0;
            filter: brightness(0.1);
            transform: scale(0.95);
            min-height: 200px;
            display: flex;
            flex-direction: column;
            align-items: center;
            color: #000;
        }

        @keyframes border-spin {
            from {
                transform: rotate(0deg);
            }

            to {
                transform: rotate(360deg);
            }
        }

        .paragraph.active {
            opacity: 1;
            filter: brightness(1);
            transform: scale(1);
            transform: none;
            box-shadow: 0 8px 30px rgba(28, 255, 7, 0.4);
            position: relative;
            z-index: 0;
            overflow: hidden;
            padding: 2px;
            border-radius: 8px;
            border: none;
            background: transparent;
        }

        .paragraph:not(.active) {
            opacity: 0 !important;
            filter: brightness(0.1);
            transform: scale(0.95);
        }

        .paragraph.active::before {
            content: '';
            position: absolute;
            z-index: -2;
            left: -50%;
            top: -50%;
            width: 200%;
            height: 200%;
            background: conic-gradient(transparent 0deg,
                    transparent 270deg,
                    #3cff01 360deg);
            animation: border-spin 3s linear infinite;
        }

        .paragraph.active::after {
            content: '';
            position: absolute;
            z-index: -1;
            left: 2px;
            top: 2px;
            right: 2px;
            bottom: 2px;
            background: #1a1a1a;
            border-radius: 6px;
        }

        .paragraph.active .text {
            color: #FFFFFF;
            background-color: transparent;
            padding: 0;
            border-radius: 0;
        }

        .text {
            font-size: 20px;
            margin-bottom: 15px;
            font-weight: 400;
            text-align: center;
            max-width: 100%;
            padding: 10px 20px;
            border-radius: 20px;
            display: inline-block;
            font-style: italic;
            quotes: "“" "”";
            background: linear-gradient(to left, rgba(255, 255, 255, 0.5), hsla(0, 0%, 31%, 0.753));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .text::before,
        .text::after {
            content: open-quote;
            /* ::after จะใช้ close-quote */
            color: #fff;
            /* กำหนดสีขาว */
            font-style: normal;
            /* ให้ไม่เอียงเหมือนข้อความ */
        }

        .text::after {
            content: close-quote;
        }

        .paragraph.shorts {
            flex-direction: row;
            gap: 20px;
            align-items: center;
            justify-content: center;
            min-height: auto;
        }

        .paragraph.shorts.reverse {
            flex-direction: row-reverse;
        }

        .paragraph.shorts .text {
            flex: 1;
            margin-bottom: 0;
            text-align: center;
            color: #fff;
        }

        .paragraph.shorts .youtube-embed {
            flex: 1;
            max-width: 300px;
            aspect-ratio: 9/16;
        }

        /* Embed Styles */
        .youtube-embed,
        .vimeo-embed {
            position: relative;
            margin: 20px auto;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.5);
            max-width: 100%;
        }

        .youtube-embed iframe,
        .vimeo-embed iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
        }

        .paragraph:not(.shorts) .youtube-embed {
            padding-bottom: 56.25%;
            height: 0;
            width: 100%;
        }

        .vimeo-embed {
            padding-bottom: 56.25%;
            height: 0;
            width: 100%;
        }

        /* Search Box */
        .search-container {
            text-align: center;
            margin-bottom: 30px;
        }

        .search-input {
            width: 100%;
            max-width: 400px;
            padding: 12px 20px;
            border: 2px solid #FFD700;
            border-radius: 25px;
            background: #111;
            color: #FFD700;
            font-size: 16px;
            font-family: inherit;
        }

        .search-input::placeholder {
            color: #FFD70088;
        }

        .search-input:focus {
            outline: none;
            border-color: hsl(0, 0%, 37%);
            box-shadow: 0 0 0 3px rgba(255, 0, 0, 0.3);
        }

        /* Work Grid */
        .work-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .work-grid a {
            text-decoration: none;
            color: inherit;
        }

        .work-card {
            background: #111;
            padding: 54px;
            border-radius: 26px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.5);
            transition: all 0.3s ease;
            color: hsl(69, 100%, 50%);
            border: 2px solid #333;
            position: relative;
            cursor: pointer;
        }

        .work-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 30px #51ff01b9;
            border-color: hwb(91 0% 0%);
        }

        .work-card h3 {
            margin: 0 0 10px;
            color: hsl(66, 100%, 50%);
            font-weight: 600;
        }

        .price-tag {
            position: absolute;
            top: 10px;
            right: 10px;
            background: linear-gradient(135deg, #ff4b2b, #ff416c);
            color: #ffffff;
            padding: 6px 18px;
            border-radius: 8px;
            font-weight: 700;
            font-size: 14px;
            letter-spacing: 1px;
            text-transform: uppercase;
            box-shadow: 0 4px 15px rgba(255, 75, 43, 0.4);
            border: none;
            transition: all 0.3s ease;
            z-index: 10;
        }

        .price-tag-free {
            position: absolute;
            top: 10px;
            right: 10px;
            padding: 6px 18px;
            border-radius: 8px;
            font-weight: 700;
            font-size: 14px;
            letter-spacing: 1px;
            text-transform: uppercase;
            color: #ffffff;
            background: linear-gradient(135deg, #00C300, #4CAF50);
            /* สีเขียวที่คุณต้องการ */
            box-shadow: 0 4px 15px rgba(0, 195, 0, 0.4);
            /* เงาสีเขียว */
            z-index: 11;
            /* มีค่าสูงกว่า z-index ของป้ายแดงเดิม */
        }

        /* Fixed LINE Ad */
        .line-ad-fixed {
            position: fixed;
            right: 0;
            top: 50%;
            transform: translateY(-50%);
            background: linear-gradient(135deg, #00C300, hwb(120 2% 26% / 0.753));
            color: #fff;
            padding: 10px 15px;
            border-radius: 8px 0 0 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
            text-align: center;
            z-index: 1000;
            cursor: pointer;
            font-size: 16px;
            font-weight: 700;
            line-height: 1.5;
            transition: right 0.3s ease;
            display: none;
        }

        .line-ad-fixed.show-ad {
            display: block;
        }

        .line-ad-fixed:hover {
            right: -10px;
        }

        .line-ad-fixed a {
            color: #fff;
            text-decoration: none;
            display: block;
        }

        .line-ad-fixed img {
            width: 32px;
            height: 32px;
            display: block;
            margin: 0 auto 5px;
        }

        #line-ad-fixed .add-line-text {
            font-size: 0.9em;
            display: block;
            line-height: 1.2;
        }

        #line-ad-fixed .account-name {
            font-size: 1.3em;
            font-weight: bold;
            background-color: #000;
            color: #ffffff;
            display: inline-block;
            margin-top: 10px;
            padding: 3px 8px;
            border-radius: 12px;
        }

        #line-ad-fixed .price {
            font-size: 1em;
            font-weight: bold;
            background-color: hsl(0, 100%, 50%);
            color: hsl(59, 100%, 50%);
            display: inline-block;
            margin-top: 10px;
            padding: 3px 8px;
            border-radius: 10px;
        }

        /* Mobile */
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }

            h1 {
                font-size: 28px;
            }

            p.intro {
                font-size: 18px;
            }

            .work-grid {
                grid-template-columns: 1fr;
            }

            .line-ad-fixed.show-ad {
                right: 0;
                top: auto;
                bottom: 10px;
                transform: none;
                width: 100%;
                max-width: none;
                border-radius: 0;
                padding: 10px;
                box-sizing: border-box;
                font-size: 14px;
            }

            .line-ad-fixed:hover {
                right: 0;
            }
        }

        .back-link a {
            color: hsl(50, 11%, 89%);
            text-decoration: none;
            font-weight: 700;
        }
    </style>
</head>

<body>
    <h1>
        <img src="https://cdn-icons-png.flaticon.com/128/13540/13540872.png"
            alt="E-Worker ระบบจ้างงานออนไลน์ บริการคุณภาพ" width="72" height="72"
            style="width:72px; vertical-align:middle;">
        <span style="vertical-align:middle; display:inline-block;">
            ระบบจ้างงาน E-Worker<br>
            <span style="font-size:12px; font-weight:500; display:block;">
                ควบคุมคุณภาพโดยผู้ก่อตั้ง Dosfixvirus และ Edit us
            </span>
        </span>
    </h1>

    <noscript>
        <div
            style="text-align:center; padding: 20px; background: #222; color: #fff; border-radius: 15px; margin: 20px; border: 2px solid #FFD700;">
            <h2>บริการรับงานคุณภาพ (JavaScript Required)</h2>
            <p>ขออภัย เว็บไซต์นี้ต้องการ JavaScript เพื่อแสดงรายการงานล่าสุด หากคุณไม่สามารถใช้งานได้
                โปรดติดต่อเราโดยตรงผ่าน LINE</p>
            <div style="margin-top: 20px;">
                <a href="https://line.me/ti/p/~@artap5321"
                    style="background: #00C300; color: #fff; padding: 10px 20px; border-radius: 8px; text-decoration: none; font-weight: bold;">
                    ติดต่อ LINE @artap5321
                </a>
            </div>
            <div style="margin-top: 20px; text-align: left; font-size: 0.9em;">
                <strong>งานที่เราให้บริการ:</strong>
                <ul>
                    <li>แก้ไขรูปภาพในงานพิธีการ (ถอดแมส, เปลี่ยนชุด, ลบคน)</li>
                    <li>หาชื่อฟอนต์จากภาพเอกสาร</li>
                    <li>สกัด URL Youtube IDs จำนวนมาก</li>
                    <li>ถอดซับไตเติ้ลจากวิดีโอ</li>
                    <li>ทำไฟล์เอกสารส่งมอบงาน</li>
                </ul>
            </div>
        </div>
    </noscript>

    <div id="main-content"></div>

    <!-- ปุ่ม LINE ขวามือ (จะเปลี่ยนราคาอัตโนมัติตามงานที่เปิดดู) -->
    <a href="https://line.me/ti/p/~@artap5321" target="_blank" style="text-decoration:none;">
        <div class="line-ad-fixed" id="line-ad-fixed">
            <p class="price" id="dynamic-price">จ้างงาน 150.-</p>
            <img src="https://scdn.line-apps.com/n/line_add_friends/btn/th.png" alt="Add LINE" style="width:120px;">
            <span class="account-name"
                style="display:block;margin-top:8px;font-size:1.2em;font-weight:700;">artap5321</span>

        </div>
    </a>

    <script>

        const lineAdFixed = document.getElementById('line-ad-fixed');
        const dynamicPriceEl = document.getElementById('dynamic-price');
        let currentSearchQuery = '';
        let currentSearchPage = 1;
        let allwork = [];

        function escapeHtml(text) {
            const map = { '&': '&amp;', '<': '&lt;', '>': '&gt;', '"': '&quot;', "'": '&#039;' };
            return text.replace(/[&<>"']/g, m => map[m]);
        }

        function escapeRegExp(string) {
            return string.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
        }

        function getPlainText(html) {
            if (!html) return '';
            const parser = new DOMParser();
            const doc = parser.parseFromString(html, 'text/html');
            return doc.body.textContent || '';
        }

        function extractYouTubeId(url) {
            const pattern = /(?:youtu\.be\/|youtube\.com\/(?:watch\?v=|embed\/|v\/|shorts\/))([a-zA-Z0-9_-]{11})/;
            const match = url.match(pattern);
            return match ? match[1] : null;
        }

        // แปลงราคาให้สวย (สำหรับการ์ด + ปุ่ม LINE)
        function formatPriceForCard(price) {
            if (price === '0' || price === 0) {
                return '<span class="price-tag-free">FREE</span>';
            }
            return `<div class="price-tag">${price} บาท</div >`;
        }

        function formatPriceForLine(price) {
            if (price === '0' || price === 0) return 'FREE';
            return `จ้างงาน ${price}.-`;
        }

        // แสดงรายละเอียดงาน + อัปเดตราคาในปุ่ม LINE
        function showWorkDetail(slug, paraIndex = null) {
            lineAdFixed.classList.add('show-ad');

            fetch(`${slug}.json`)
                .then(r => r.json())
                .then(data => {
                    const price = data.price ?? '150';
                    dynamicPriceEl.innerHTML = formatPriceForLine(price);

                    document.title = escapeHtml(data.title);

                    let html = `<center><p class="back-link"><a href="#">← เมนูงานที่รับจ้าง</a></p></center>
                            <h1>${escapeHtml(data.title)}</h1>`;

                    data.paragraphs.forEach((para, index) => {
                        let text = para.text || '';
                        let mediaEmbed = '';
                        let shortsClass = '';

                        if (para.media_url && para.media_type) {
                            const url = para.media_url.trim();

                            if (para.media_type === "youtube") {
                                const videoId = extractYouTubeId(url);
                                if (videoId) {
                                    const isShorts = url.includes('/shorts/');
                                    if (isShorts) shortsClass = Math.random() < 0.5 ? 'shorts' : 'shorts reverse';
                                    const embedUrl = `https://www.youtube.com/embed/${videoId}?hl=th&cc_lang_pref=th&rel=0&modestbranding=1`;
                                    mediaEmbed = `
                                    <div class="youtube-embed" data-embed-url="${embedUrl}" style="position:relative;padding-bottom:56.25%;height:0;overflow:hidden;border-radius:12px;margin:20px 0;">
                                        <iframe loading="lazy" allowfullscreen allow="autoplay; picture-in-picture"
                                            style="position:absolute;top:0;left:0;width:100%;height:100%;border:0;"></iframe>
                                    </div>`;
                                }
                            }

                            if (para.media_type === "vimeo") {
                                const vimeoId = url.match(/vimeo\.com\/(?:.*\/)?(\d+)/)?.[1];
                                if (vimeoId) {
                                    mediaEmbed = `
                                    <div style="position:relative;padding-bottom:56.25%;height:0;overflow:hidden;border-radius:12px;margin:20px 0;">
                                        <iframe src="https://player.vimeo.com/video/${vimeoId}?title=0&byline=0&portrait=0" 
                                            loading="lazy" allowfullscreen allow="autoplay" style="position:absolute;top:0;left:0;width:100%;height:100%;border:0;"></iframe>
                                    </div>`;
                                }
                            }
                        }

                        html += `<div id="para-${index}" class="paragraph ${shortsClass}">
                                <div class="text">${text}</div>
                                ${mediaEmbed}
                             </div>`;
                    });

                    document.getElementById('main-content').innerHTML = html;



                    // Lazy load YouTube/Vimeo และ Focus Paragraph
                    const observer = new IntersectionObserver(entries => {
                        entries.forEach(entry => {
                            const paragraph = entry.target;
                            if (entry.isIntersecting) {
                                paragraph.classList.add('active');

                                // โค้ด Lazy Load เดิม
                                const div = paragraph.querySelector('.youtube-embed[data-embed-url]');
                                if (div) {
                                    const iframe = div.querySelector('iframe');
                                    if (iframe && !iframe.src) iframe.src = div.dataset.embedUrl;
                                }
                            } else {
                                paragraph.classList.remove('active');
                            }
                        });
                    }, { threshold: 0.7 });
                    document.querySelectorAll('.paragraph').forEach(p => observer.observe(p));

                    // ฟังก์ชันเลื่อนแบบ smooth + หน่วง
                    function smoothScrollTo(element) {
                        const targetPosition = element.getBoundingClientRect().top + window.pageYOffset;
                        const startPosition = window.pageYOffset;
                        const distance = targetPosition - startPosition;
                        const duration = 5000;
                        let start = null;

                        function animation(currentTime) {
                            if (!start) start = currentTime;
                            const timeElapsed = currentTime - start;
                            const run = easeOutCubic(timeElapsed, startPosition, distance, duration);
                            window.scrollTo(0, run);
                            if (timeElapsed < duration) requestAnimationFrame(animation);
                        }
                        requestAnimationFrame(animation);
                    }

                    // Easing หน่วงแบบนุ่ม
                    function easeOutCubic(t, b, c, d) {
                        t /= d; t--;
                        return c * (t * t * t + 1) + b;
                    }


                    // เลื่อนไปย่อหน้าที่ค้นหาเจอ
                    if (paraIndex !== null) {
                        setTimeout(() => {
                            const el = document.getElementById(`para-${paraIndex}`);
                            if (el) {
                                el.classList.add('active');
                                smoothScrollTo(el);
                            }
                        }, 300);
                    }

                    // ปุ่มย้อนกลับ
                    document.querySelector('.back-link a').onclick = e => {
                        e.preventDefault();
                        showWorkList(currentSearchQuery, currentSearchPage);
                        history.pushState({}, '', '/eworker/');
                    };
                })
                .catch(() => {
                    document.getElementById('main-content').innerHTML = '<p style="text-align:center;color:#FF0000;">ไม่พบข้อมูลงานนี้</p>';
                });
        }

        // แสดงรายการงานทั้งหมด + แสดงราคาถูกต้อง (รวม "ฟรี")
        function showWorkList(query = '', page = 1) {
            lineAdFixed.classList.remove('show-ad');
            dynamicPriceEl.innerHTML = 'จ้างงาน 150.-';
            document.title = 'บริการรับงาน E-Worker';
            currentSearchQuery = query;
            currentSearchPage = page;

            const itemsPerPage = 10;
            let html = `<div class="search-container">
                        <input type="text" class="search-input" id="search-input" placeholder="ค้นหางานที่รับ..." value="${escapeHtml(query)}" autocomplete="off">
                    </div>`;

            fetch('work.json')
                .then(r => r.json())
                .then(workList => {
                    const promises = workList.map(work =>
                        fetch(`${work.slug}.json`)
                            .then(r => r.json())
                            .then(detail => ({
                                ...work,
                                paragraphs: detail.paragraphs || [],
                                price: detail.price || work.price || '150'
                            }))
                            .catch(() => ({ ...work, paragraphs: [], price: work.price || '150' }))
                    );

                    Promise.all(promises).then(works => {
                        allwork = works.sort((a, b) => b.slug - a.slug);

                        let filtered = allwork;
                        if (query.trim()) {
                            const q = query.toLowerCase();
                            filtered = allwork.filter(w =>
                                w.title.toLowerCase().includes(q) ||
                                w.paragraphs.some(p => getPlainText(p.text || '').toLowerCase().includes(q))
                            );
                        }

                        const totalPages = Math.ceil(filtered.length / itemsPerPage);
                        const pageItems = filtered.slice((page - 1) * itemsPerPage, page * itemsPerPage);

                        html += `<h2>${query ? `ผลค้นหา "${escapeHtml(query)}" (${filtered.length} ผลลัพธ์)` : 'งานที่เปิดรับล่าสุด'}</h2>
                             <div class="work-grid">`;

                        if (pageItems.length === 0) {
                            html += '<p style="text-align:center;color:#FFD700;font-size:20px;">ไม่พบงานที่ตรงกับการค้นหา</p>';
                        } else {
                            pageItems.forEach(work => {
                                const price = work.price || '150';
                                const workUrl = work.paragraphs.length > 0 ? work.slug : '#';
                                html += `
                                <a href="${workUrl}" style="text-decoration:none;color:inherit;">
                                    <div class="work-card">
                                       
                                            ${formatPriceForCard(price)}
                                       
                                        <h3>
                                            <img src="https://cdn-icons-png.flaticon.com/128/3281/3281307.png" style="width:36px;vertical-align:middle;margin-right:10px;">
                                            ${escapeHtml(work.title)}
                                        </h3>
                                    </div>
                                </a>`;
                            });
                        }

                        html += `</div>`;

                        // Pagination
                        if (totalPages > 1) {
                            html += '<div style="text-align:center;margin:40px 0;">';
                            if (page > 1) {
                                html += `<button onclick="showWorkList('${escapeHtml(query)}',${page - 1})" style="background:#FF4500;color:#fff;padding:10px 20px;border:none;border-radius:8px;margin:0 8px;cursor:pointer;">ก่อนหน้า</button>`;
                            }
                            for (let i = 1; i <= totalPages; i++) {
                                if (i === page) {
                                    html += `<span style="background:#FFD700;color:#000;padding:10px 18px;border-radius:8px;margin:0 5px;font-weight:bold;">${i}</span>`;
                                } else {
                                    html += `<button onclick="showWorkList('${escapeHtml(query)}',${i})" style="background:#333;color:#FFD700;padding:10px 18px;border:none;border-radius:8px;margin:0 5px;cursor:pointer;">${i}</button>`;
                                }
                            }
                            if (page < totalPages) {
                                html += `<button onclick="showWorkList('${escapeHtml(query)}',${page + 1})" style="background:#FF4500;color:#fff;padding:10px 20px;border:none;border-radius:8px;margin:0 8px;cursor:pointer;">ถัดไป</button>`;
                            }
                            html += '</div>';
                        }

                        document.getElementById('main-content').innerHTML = html;

                        // ช่องค้นหา
                        const input = document.getElementById('search-input');
                        if (input) {
                            input.focus();
                            input.selectionStart = input.selectionEnd = input.value.length;
                            input.oninput = e => showWorkList(e.target.value, 1);
                        }

                        // คลิกการ์ดเพื่อเปิดงาน
                        document.querySelectorAll('.work-card').forEach(card => {
                            card.parentElement.onclick = e => {
                                e.preventDefault();
                                const slug = card.parentElement.getAttribute('href');
                                if (slug && slug !== '#') {
                                    history.pushState({ work: slug }, '', slug);
                                    showWorkDetail(slug);
                                }
                            };
                        });
                    });
                })
                .catch(() => {
                    document.getElementById('main-content').innerHTML = '<p style="text-align:center;color:#FF0000;">ยังไม่มีประกาศรับงาน</p>';
                });
        }

        // จัดการ history state changes (back/forward buttons)
        window.addEventListener('popstate', (event) => {
            routePage();
        });

        // Main routing function
        function routePage() {
            const urlParams = new URLSearchParams(window.location.search);
            const workParam = urlParams.get('work');
            const path = window.location.pathname;

            // Check for clean URL pattern /eworker/1, /eworker/2, etc.
            const match = path.match(/\/eworker\/(\d+)/);
            const slug = workParam || (match ? match[1] : null);

            if (slug) {
                // Clean up URL if it has query parameter
                if (workParam) {
                    history.replaceState({ work: slug }, '', slug);
                }
                showWorkDetail(slug);
            } else {
                showWorkList();
            }
        }

        // โหลดครั้งแรก
        window.addEventListener('load', () => {
            routePage();
        });
    </script>
</body>

</html>